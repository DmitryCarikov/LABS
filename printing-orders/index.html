<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printing Orders</title>
    <script>
        async function fetchData(url) {
            const response = await fetch(url);
            return response.json();
        }

        async function postData(url, data) {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            return response.json();
        }

        async function getData() {
            const data = await fetchData('/api/data');
            document.getElementById('data').innerText = JSON.stringify(data, null, 2);
        }

        async function sendData() {
            const newData = { id: 4, name: 'Order 5' };
            const response = await postData('/api/data/submit', newData);
            document.getElementById('response').innerText = JSON.stringify(response, null, 2);
            getData();
        }

        async function downloadData(format) {
            const response = await fetch(`/api/data/format`, {
                headers: {
                    'Accept': format
                }
            });

            const data = await response.text();
            const blob = new Blob([data], { type: format });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `data.${format === 'application/xml' ? 'xml' : format === 'text/html' ? 'html' : 'json'}`;
            link.click();
        }
    </script>
</head>

<body>
    <h1>Printing Orders</h1>
    <button onclick="getData()">Get Data</button>
    <button onclick="sendData()">Send Data</button>
    <button onclick="downloadData('application/json')">Download JSON</button>
    <button onclick="downloadData('application/xml')">Download XML</button>
    <button onclick="downloadData('text/html')">Download HTML</button>
    <pre id="data"></pre>
    <pre id="response"></pre>
</body>

</html>